<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jornada Acad√™mica</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;700&family=DM+Sans:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>

    <!-- Splash Screen -->
    <div class="splash-screen" id="splashScreen">
        <div class="splash-inner">
            <div class="splash-icon">üéì</div>
            <div class="splash-title">Jornada Acad√™mica</div>
            <div class="splash-loader"><div class="loader-bar"></div></div>
        </div>
    </div>

    <!-- INTERFACE PRINCIPAL -->
    <div class="app-content" id="mainView">

        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-brand">
                <span class="brand-icon">üéì</span>
                <span class="brand-name">Jornada<br><strong>Acad√™mica</strong></span>
            </div>
            <nav class="sidebar-nav">
                <a href="#" class="nav-item active" data-view="estudos" onclick="switchView('estudos', this)">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path></svg>
                    Estudos
                </a>
                <a href="#" class="nav-item" data-view="revisoes" onclick="switchView('revisoes', this)">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="23 4 23 10 17 10"></polyline><polyline points="1 20 1 14 7 14"></polyline><path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path></svg>
                    Revis√µes
                </a>
                <a href="#" class="nav-item" data-view="questoes" onclick="switchView('questoes', this)">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path><line x1="12" y1="17" x2="12.01" y2="17"></line></svg>
                    Quest√µes
                </a>
            </nav>
            <div class="sidebar-footer">
                <div id="connectionStatus" class="conn-status">
                    <span class="conn-dot"></span>
                    <span class="conn-label">Offline</span>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">

            <!-- ===== VIEW: ESTUDOS ===== -->
            <div id="view-estudos" class="view active">
                <div class="page-header">
                    <div>
                        <h1 class="page-title">Estudos</h1>
                        <p class="page-subtitle" id="currentMonthLabel">Carregando...</p>
                    </div>
                    <div class="header-actions">
                        <button class="btn-icon" onclick="changeMonth(-1)" title="M√™s anterior">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="15 18 9 12 15 6"></polyline></svg>
                        </button>
                        <button class="btn-icon" onclick="changeMonth(1)" title="Pr√≥ximo m√™s">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="9 18 15 12 9 6"></polyline></svg>
                        </button>
                        <button class="btn-icon" onclick="sincronizar()" title="Sincronizar">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="23 4 23 10 17 10"></polyline><polyline points="1 20 1 14 7 14"></polyline><path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path></svg>
                        </button>
                        <button class="btn-primary" onclick="abrirFormEstudo()">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
                            Novo Estudo
                        </button>
                    </div>
                </div>

                <!-- Stats -->
                <div class="stats-row">
                    <div class="stat-card">
                        <div class="stat-icon pending-icon">üìö</div>
                        <div>
                            <div class="stat-num" id="statPendente">0</div>
                            <div class="stat-lbl">Pendentes</div>
                        </div>
                    </div>
                    <div class="stat-card clickable" onclick="showAtrasosModal()">
                        <div class="stat-icon danger-icon">‚è∞</div>
                        <div>
                            <div class="stat-num danger" id="statAtraso">0</div>
                            <div class="stat-lbl">Em Atraso</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon success-icon">‚úÖ</div>
                        <div>
                            <div class="stat-num success" id="statConcluido">0</div>
                            <div class="stat-lbl">Conclu√≠dos</div>
                        </div>
                    </div>
                    <div class="stat-card clickable" onclick="showRevisoesModal()">
                        <div class="stat-icon info-icon">üîÑ</div>
                        <div>
                            <div class="stat-num info" id="statRevisoes">0</div>
                            <div class="stat-lbl">Revis√µes Pendentes</div>
                        </div>
                    </div>
                </div>

                <!-- Search & Filters -->
                <div class="search-section">
                    <div class="search-input-wrap">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"></circle><path d="m21 21-4.35-4.35"></path></svg>
                        <input type="text" id="searchInput" placeholder="Pesquisar por curso, conte√∫do..." oninput="filterEstudos()">
                    </div>
                    <select id="filterCurso" onchange="filterEstudos()">
                        <option value="">Todos os Cursos</option>
                    </select>
                    <select id="filterStatus" onchange="filterEstudos()">
                        <option value="">Todos os Status</option>
                        <option value="PENDENTE">Pendente</option>
                        <option value="ATRASO">Em Atraso</option>
                        <option value="CONCLUIDO">Conclu√≠do</option>
                    </select>
                </div>

                <!-- Table -->
                <div class="card">
                    <div id="estudosContainer">
                        <div class="empty-state">
                            <div class="empty-icon">üìñ</div>
                            <p>Nenhum estudo registrado</p>
                            <button class="btn-primary" onclick="abrirFormEstudo()">Registrar primeiro estudo</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ===== VIEW: REVIS√ïES ===== -->
            <div id="view-revisoes" class="view">
                <div class="page-header">
                    <div>
                        <h1 class="page-title">Revis√µes</h1>
                        <p class="page-subtitle">Agenda de revis√µes programadas</p>
                    </div>
                    <button class="btn-primary" onclick="abrirFormRevisao()">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
                        Agendar Revis√£o
                    </button>
                </div>
                <div class="card">
                    <div id="revisoesContainer">
                        <div class="empty-state">
                            <div class="empty-icon">üîÑ</div>
                            <p>Nenhuma revis√£o agendada</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ===== VIEW: QUEST√ïES ===== -->
            <div id="view-questoes" class="view">
                <div class="page-header">
                    <div>
                        <h1 class="page-title">Banco de Quest√µes</h1>
                        <p class="page-subtitle">Quest√µes erradas para revis√£o</p>
                    </div>
                    <button class="btn-primary" onclick="abrirFormQuestao()">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
                        Registrar Quest√£o
                    </button>
                </div>
                <div class="search-section">
                    <div class="search-input-wrap">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"></circle><path d="m21 21-4.35-4.35"></path></svg>
                        <input type="text" id="searchQuestao" placeholder="Pesquisar quest√µes..." oninput="filterQuestoes()">
                    </div>
                    <select id="filterQuestaoStatus" onchange="filterQuestoes()">
                        <option value="">Todas</option>
                        <option value="PENDENTE">Pendentes</option>
                        <option value="FEITA">Feitas</option>
                    </select>
                    <select id="filterQuestaoCurso" onchange="filterQuestoes()">
                        <option value="">Todos os Cursos</option>
                    </select>
                </div>
                <div class="card">
                    <div id="questoesContainer">
                        <div class="empty-state">
                            <div class="empty-icon">‚ùì</div>
                            <p>Nenhuma quest√£o registrada</p>
                        </div>
                    </div>
                </div>
            </div>

        </main>
    </div>

    <!-- =========== MODAL: FORM ESTUDO =========== -->
    <div class="modal-overlay" id="modalEstudo" style="display:none;">
        <div class="modal-box">
            <div class="modal-head">
                <h3 id="modalEstudoTitle">Registrar Estudo</h3>
                <button class="btn-close" onclick="fecharModalEstudo()">‚úï</button>
            </div>
            <form id="formEstudo" onsubmit="submitEstudo(event)">
                <input type="hidden" id="estudoId">
                <div class="form-grid">
                    <div class="form-group full">
                        <label>Curso *</label>
                        <input type="text" id="fCurso" placeholder="Ex: Engenharia de Software" required>
                    </div>
                    <div class="form-group">
                        <label>Unidade</label>
                        <input type="text" id="fUnidade" placeholder="Ex: Unidade 3">
                    </div>
                    <div class="form-group">
                        <label>Conte√∫do *</label>
                        <input type="text" id="fConteudo" placeholder="Ex: Algoritmos de Ordena√ß√£o" required>
                    </div>
                    <div class="form-group">
                        <label>Data de In√≠cio *</label>
                        <input type="date" id="fDataInicio" required>
                    </div>
                    <div class="form-group">
                        <label>Data de T√©rmino</label>
                        <input type="date" id="fDataTermino">
                    </div>
                    <div class="form-group full">
                        <label>Observa√ß√£o</label>
                        <textarea id="fObservacao" rows="3" placeholder="Anota√ß√µes sobre este estudo..."></textarea>
                    </div>
                </div>
                <div class="modal-actions">
                    <button type="button" onclick="fecharModalEstudo()" class="btn-secondary">Cancelar</button>
                    <button type="submit" class="btn-primary">Salvar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- =========== MODAL: DETALHES ESTUDO =========== -->
    <div class="modal-overlay" id="modalDetalhe" style="display:none;">
        <div class="modal-box modal-large">
            <div class="modal-head">
                <h3 id="detalheTitle">Detalhes do Estudo</h3>
                <button class="btn-close" onclick="fecharModalDetalhe()">‚úï</button>
            </div>
            <div id="detalheBody"></div>
            <div class="modal-actions">
                <button type="button" onclick="fecharModalDetalhe()" class="btn-secondary">Fechar</button>
                <button type="button" id="btnEditarDetalhe" class="btn-primary">Editar</button>
            </div>
        </div>
    </div>

    <!-- =========== MODAL: FORM REVIS√ÉO =========== -->
    <div class="modal-overlay" id="modalRevisao" style="display:none;">
        <div class="modal-box">
            <div class="modal-head">
                <h3>Agendar Revis√£o</h3>
                <button class="btn-close" onclick="fecharModalRevisao()">‚úï</button>
            </div>
            <form id="formRevisao" onsubmit="submitRevisao(event)">
                <input type="hidden" id="revisaoEstudoId">
                <input type="hidden" id="revisaoIndex" value="-1">
                <div class="form-grid">
                    <div class="form-group full">
                        <label>Estudo *</label>
                        <select id="fRevisaoEstudo" required></select>
                    </div>
                    <div class="form-group">
                        <label>Data da Revis√£o *</label>
                        <input type="date" id="fRevisaoData" required>
                    </div>
                    <div class="form-group">
                        <label>Tipo</label>
                        <select id="fRevisaoTipo">
                            <option value="REVISAO_1">1¬™ Revis√£o</option>
                            <option value="REVISAO_2">2¬™ Revis√£o</option>
                            <option value="REVISAO_3">3¬™ Revis√£o</option>
                            <option value="REVISAO_FINAL">Revis√£o Final</option>
                        </select>
                    </div>
                    <div class="form-group full">
                        <label>Anota√ß√µes</label>
                        <textarea id="fRevisaoNota" rows="2" placeholder="Anota√ß√µes sobre a revis√£o..."></textarea>
                    </div>
                </div>
                <div class="modal-actions">
                    <button type="button" onclick="fecharModalRevisao()" class="btn-secondary">Cancelar</button>
                    <button type="submit" class="btn-primary">Agendar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- =========== MODAL: FORM QUEST√ÉO =========== -->
    <div class="modal-overlay" id="modalQuestao" style="display:none;">
        <div class="modal-box">
            <div class="modal-head">
                <h3>Registrar Quest√£o</h3>
                <button class="btn-close" onclick="fecharModalQuestao()">‚úï</button>
            </div>
            <form id="formQuestao" onsubmit="submitQuestao(event)">
                <input type="hidden" id="questaoEstudoId">
                <input type="hidden" id="questaoIndex" value="-1">
                <div class="form-grid">
                    <div class="form-group full">
                        <label>Estudo / Conte√∫do *</label>
                        <select id="fQuestaoEstudo" required onchange="populateQuestaoCurso()"></select>
                    </div>
                    <div class="form-group full">
                        <label>Pergunta / Quest√£o *</label>
                        <textarea id="fQuestaoPergunta" rows="3" required placeholder="Escreva a quest√£o ou t√≥pico que errou..."></textarea>
                    </div>
                    <div class="form-group full">
                        <label>Resposta / Resolu√ß√£o</label>
                        <textarea id="fQuestaoResposta" rows="3" placeholder="Resposta correta ou explica√ß√£o..."></textarea>
                    </div>
                    <div class="form-group">
                        <label>Dificuldade</label>
                        <select id="fDificuldade">
                            <option value="BAIXA">Baixa</option>
                            <option value="MEDIA" selected>M√©dia</option>
                            <option value="ALTA">Alta</option>
                        </select>
                    </div>
                </div>
                <div class="modal-actions">
                    <button type="button" onclick="fecharModalQuestao()" class="btn-secondary">Cancelar</button>
                    <button type="submit" class="btn-primary">Salvar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- =========== MODAL: ALERTAS ATRASO =========== -->
    <div class="modal-overlay" id="modalAtrasos" style="display:none;">
        <div class="modal-box">
            <div class="modal-head">
                <h3>‚ö†Ô∏è Estudos em Atraso</h3>
                <button class="btn-close" onclick="document.getElementById('modalAtrasos').style.display='none'">‚úï</button>
            </div>
            <div id="atrasosBody"></div>
            <div class="modal-actions">
                <button type="button" onclick="document.getElementById('modalAtrasos').style.display='none'" class="btn-secondary">Fechar</button>
            </div>
        </div>
    </div>

    <!-- =========== MODAL: REVIS√ïES PENDENTES =========== -->
    <div class="modal-overlay" id="modalRevisoesPendentes" style="display:none;">
        <div class="modal-box">
            <div class="modal-head">
                <h3>üîÑ Revis√µes Pendentes</h3>
                <button class="btn-close" onclick="document.getElementById('modalRevisoesPendentes').style.display='none'">‚úï</button>
            </div>
            <div id="revisoesPendentesBody"></div>
            <div class="modal-actions">
                <button type="button" onclick="document.getElementById('modalRevisoesPendentes').style.display='none'" class="btn-secondary">Fechar</button>
            </div>
        </div>
    </div>

    <!-- =========== CONFIRM MODAL =========== -->
    <div class="modal-overlay" id="confirmModal" style="display:none;">
        <div class="modal-box modal-small">
            <div class="modal-head">
                <h3 id="confirmTitle">Confirmar</h3>
            </div>
            <p id="confirmMessage" style="padding: 0 1.5rem 1rem; color: var(--text-secondary);"></p>
            <div class="modal-actions">
                <button type="button" id="confirmCancel" class="btn-secondary">Cancelar</button>
                <button type="button" id="confirmOk" class="btn-danger">Confirmar</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
